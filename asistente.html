<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Track</title>
    <link rel="stylesheet" href="css/general.css">
    <link rel="stylesheet" href="css/asist.css">
    <link rel="icon" type="image/png" href="img/logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=K2D:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header-container"> 
        <a href="index.html" class="logo-title">
            <img id="logo" src="img/logo.png" width="90px" height="90px">
            <h1 class="titulo">SECURE TRACK</h1>
        </a> 
        <div class="image-user" id="div-image" style="display: none;">
            <a href="config.html"><img id="image-user" style="display: none;" alt="Profile Photo" />
            </a>
        </div>
    </header>
 <main>
<table id="transaccionesTable">
    <thead>
        <tr>
            <th>Alumno</th>
            <th>Usuario</th>
            <th>Slot</th>
            <th>N° de Computadora</th>
            <th>Status</th>
            <th>Hora de Retirada</th>
        </tr>
    </thead>
    <tbody>
        <!-- Los datos dinámicos serán añadidos aquí -->
    </tbody>
</table>
</main>
    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="politica-de-privacidad.html">Política de Privacidad</a>
                <a href="terminos-y-condiciones.html">Términos y Condiciones</a>
            </div>
            <div class="footer-info">
                <p>&copy; 2024 Secure Track. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>
    <script src="js/main.js"></script>
    <script>
        if (!sessionStorage.getItem("asist-Key")) {
            window.location.href = "accesodenegado.html";
        }

        async function cargarTransacciones() {
        try {
           
            const response = await fetch('https://secure-track-db.vercel.app/asistentes/tokens'); 
            const transacciones = await response.json();
            
            // Selecciona el cuerpo de la tabla
            const tbody = document.querySelector('#transaccionesTable tbody');
            
            // Limpia cualquier fila previa
            tbody.innerHTML = '';
            
            // Itera sobre las transacciones y crea filas dinámicas
            transacciones.forEach(transaccion => {
                const fila = document.createElement('tr');
                
                fila.innerHTML = `
                    <td>${transaccion.alumno}</td>
                    <td>${transaccion.usuario}</td>
                    <td>${transaccion.slot}</td>
                    <td>${transaccion.computadora}</td>
                    <td>${transaccion.status}</td>
                    <td>${transaccion.hora}</td>
                `;
                
                tbody.appendChild(fila);
            });
        } catch (error) {
            console.error('Error al cargar las transacciones:', error);
        }
    }

    // Llama a la función al cargar la página
    cargarTransacciones();
</script>

    </script>
    
</body>
</html>
